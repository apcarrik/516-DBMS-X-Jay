{% extends "base.html" %}

{% block content %}

<h1>Your info</h1>
<p>Firstname: {{userinfo.firstname}}</p>
<p>Lastname: {{userinfo.lastname}}</p>
<p>Email:{{userinfo.email}}</p>
<p>Address: {{userinfo.address}}</p>
<p>Balance:{{userinfo.balance}}</p>

<a href="{{ url_for('users.editProfile') }}" type="button" class="btn btn-light">Edit Profile</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="{{ url_for('users.balanceTopup') }}" type="button" class="btn btn-light">Balance top-up</a>
<a href="{{ url_for('users.balanceWithdraw') }}" type="button" class="btn btn-light">Balance Withdraw</a>

<hr/>
<a href="{{ url_for('products.cart') }}" type="button" class="btn btn-light">Your Cart</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="{{ url_for('inventory.inventory') }}" type="button" class="btn btn-light">Your Inventory</a>
<p> TODO Feedback interface </p>

<br><br>

{% if current_user.is_authenticated %}
<h2>Your recent purchases:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Order ID</th>
      <th scope="col">Total Price</th>
      <th scope="col">Total Quantity</th>
      <th scope="col">Time purchased</th>
      <th scope="col">Overall fulfilled</th>
      <th scope="col"> </th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history%}
      <tr>
        <th scope="row">{{purchase.orderid}}</th>
        <td>{{purchase.totalprice}}</td>
        <td>{{purchase.totalQt}}</td>
        <td>{{purchase.time_purchased}}</td>
        <td>{{purchase.isFulfill}}</td>
        <td> <a href="{{url_for('products.orderDetail', orderid=purchase.orderid) }}" class="btn btn-primary btn-lg" role="button">Order Detail</a></td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your purchase history!</p>
{% endif %}
{% endblock %}

